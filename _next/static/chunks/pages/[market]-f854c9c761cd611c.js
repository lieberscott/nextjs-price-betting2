(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{53955:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[market]",function(){return t(30971)}])},30971:function(e,r,t){"use strict";t.r(r);var n=t(34051),a=t.n(n),s=t(85893),o=t(83078),i=t(41664),l=t.n(i),c=t(96301),u=t(67294),d=t(11163),m=t(35553),f=t(1438),x=t(34295),p=t(30928);function g(e,r,t,n,a,s,o){try{var i=e[s](o),l=i.value}catch(c){return void t(c)}i.done?r(l):Promise.resolve(l).then(n,a)}function h(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){g(s,n,a,o,i,"next",e)}function i(e){g(s,n,a,o,i,"throw",e)}o(void 0)}))}}r.default=function(){var e=(0,d.useRouter)(),r=(0,u.useState)(""),t=r[0],n=r[1],i=(0,u.useState)("0"),g=i[0],b=i[1],y=e.query,k=(y.market,y.marketAddress),v=y.asset,w=y.ethBalance,N=y.expirationTime,j=y.cutoffTime,E=(y.deployTime,y.entryFee),T=y.open,_=y.numPlayers,P=E?parseFloat(m.bM(E)):"0",C=w?parseFloat(m.bM(w)):"0";console.log("entryFeeNum : ",P);var S=(0,u.useState)(C),F=S[0],A=S[1],H=(0,u.useState)(_),M=H[0],B=H[1],R=(0,x.lm)(),z=/^[+]?([1-9][0-9]*(?:[\.][0-9]*)?|0*\.0*[1-9][0-9]*)(?:[eE][+-][0-9]+)?$/,O=function(){var e=h(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.test(t)?(r=m.vz(t).toString(),console.log("isNum : "),console.log("formattedNum : ",r),b(r)):window.alert("Estimate is not a valid number");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){g>0&&q()}),[g]);var W=function(){var e=h(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.wait(1);case 2:A((function(e){return e+P})),B((function(e){return parseInt(e)+1})),X(r);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),X=function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R({type:"info",message:"Transaction Complete!",title:"Tx Notification",position:"topR",icon:"bell"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({onSuccess:W,onError:function(e){return console.log(e)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=(0,o.JX)({abi:c.instanceAbi,contractAddress:k,functionName:"makePrediction",params:{_price:g.toString()},msgValue:E}),L=(D.data,D.runContractFunction);return(0,s.jsxs)("div",{children:[(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)("a",{className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-red",children:"Back"})}),(0,s.jsxs)("div",{className:T?"max-w-xl p-6 bg-lime-100 border border-gray-200 rounded-lg shadow dark:bg-lime-800 dark:border-lime-700":"max-w-xl p-6 bg-red-100 border border-gray-200 rounded-lg shadow dark:bg-red-800 dark:border-red-700",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-4",children:(0,s.jsx)("img",{className:"w-8 h-8 rounded-full",src:"0"===v?"/ethereum.png":"1"===v?"/bitcoin.png":"/doge.png"})}),(0,s.jsxs)("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:["What will ","0"===v?"ETH's":"1"===v?"BTC's":"DOGE's"," price be by ",(0,f.P)(N),"?"]}),(0,s.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Entry Fee: ",P," ETH (entry fees are ALWAYS paid in ETH, regardless of market)"]}),(0,s.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Number of Entrants: ",M]}),(0,s.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Current prize pool: ",F," ETH "]}),(0,s.jsxs)("p",{className:"flex mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Predictions Must be in by: ",(0,f.P)(j)," ",(0,s.jsx)("span",{className:"ml-6",children:(0,s.jsx)(p.Z,{cutoffTime:j})})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your price prediction (US Dollars)"}),(0,s.jsxs)("p",{className:"flex items-center font-normal text-gray-700 dark:text-gray-400 bg-white px-5 rounded-lg",children:["$",(0,s.jsx)("input",{name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-500 dark:placeholder-gray-400 bg-white dark:text-gray ml-2",onChange:function(e){return n(e.target.value)},value:t,placeholder:"2000",required:!0})]})]}),(0,s.jsxs)("button",{onClick:O,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:["Make Prediction",(0,s.jsx)("svg",{"aria-hidden":"true",className:"w-4 h-4 ml-2 -mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),(0,s.jsx)("p",{className:"flex items-center font-normal text-gray-700 dark:text-gray-400",children:"Will be rejected if past the close time"})]})]})}},11163:function(e,r,t){e.exports=t(80880)}},function(e){e.O(0,[185,774,888,179],(function(){return r=53955,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
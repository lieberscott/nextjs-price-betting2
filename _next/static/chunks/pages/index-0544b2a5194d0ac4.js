(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3817)}])},30928:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(85893),i=n(67294);function r(e){var t=(0,i.useState)(0),n=t[0],r=t[1],s=(0,i.useState)(0),u=s[0],o=s[1],c=(0,i.useState)(0),p=c[0],d=c[1];(0,i.useEffect)((function(){var t=Date.now(),n=1e3*parseInt(e.cutoffTime),a=n-t<0?[0,0,0]:l(n-t);r(a[0]),o(a[1]),d(a[2])}),[]);var l=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return[Math.floor(e/36e5%24),n,t]};return(0,i.useEffect)((function(){var e=setInterval((function(){p>0&&d(p-1),0===u&&(0===n?clearInterval(e):(r(n-1),o(59),d(59))),0===p&&(0===u?clearInterval(e):(o(u-1),d(59)))}),1e3);return function(){clearInterval(e)}})),(0,a.jsx)("div",{className:"flex",children:0===n&&0===u&&0===p?"Entries Closed":(0,a.jsxs)("span",{children:[" ",n,":",u<10?"0".concat(u):u,":",p<10?"0".concat(p):p]})})}},96301:function(e,t,n){"use strict";var a=n(37917),i=n(83753),r=n(4463);e.exports={contractAddresses:a,factoryAbi:i,instanceAbi:r}},3817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a=n(85893),i=n(9008),r=n(7160),s=n.n(r),u=n(34295);function o(){return(0,a.jsxs)("nav",{className:"p-5 border-b-2 flex flex-row",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-3xl",children:" Decentralized Prediction Markets"}),(0,a.jsx)("div",{className:"ml-auto py-2 px-4",children:(0,a.jsx)(u.NL,{moralisAuth:!1})})]})}var c=n(34051),p=n.n(c),d=n(96301),l=n(83078),m=n(67294),y=(n(25675),n(35553)),f=n(41664),x=n.n(f),g=n(1438),b=n(30928);function h(e,t,n,a,i,r,s){try{var u=e[r](s),o=u.value}catch(c){return void n(c)}u.done?t(o):Promise.resolve(o).then(a,i)}function v(e){var t=(0,l.Nr)(),n=(t.account,t.chainId),i=(parseInt(n),e.marketAddress),r=((0,u.lm)(),(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getAsset",params:{}})),s=r.data,o=r.runContractFunction,c=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getEthBalance",params:{}}),f=c.data,v=c.runContractFunction,_=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getExpirationTime",params:{}}),T=_.data,N=_.runContractFunction,M=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getEntryFee",params:{}}),k=M.data,w=M.runContractFunction,j=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getDeployTime",params:{}}),S=j.data,A=(j.runContractFunction,(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getCutoffTime",params:{}})),E=A.data,P=A.runContractFunction,C=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getIsOpen",params:{}}),F=C.data,I=C.runContractFunction,H=(0,l.JX)({abi:d.instanceAbi,contractAddress:i,functionName:"getNumPlayers",params:{}}),J=H.data,O=H.runContractFunction,X=function(){var e,t=(e=p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.sent.toString(),e.next=5,v();case 5:return e.sent.toString(),e.next=8,N();case 8:return e.sent.toString(),e.next=11,w();case 11:return e.sent.toString(),e.next=14,P();case 14:return e.sent.toString(),e.next=17,I();case 17:return e.sent.toString(),e.next=20,O();case 20:e.sent.toString();case 21:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){h(r,a,i,s,u,"next",e)}function u(e){h(r,a,i,s,u,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,m.useEffect)((function(){X()}),[]);return(0,a.jsx)(x(),{href:{pathname:"/".concat(e.index),query:{asset:s?s.toString():"",ethBalance:f?f.toString():"",expirationTime:T?T.toString():"",entryFee:k?k.toString():"",deployTime:S?S.toString():"",cutoffTime:E?E.toString():"",open:F?F.toString():"",numPlayers:J?J.toString():"",marketAddress:i}},children:(0,a.jsx)("a",{children:(0,a.jsxs)("div",{className:F?"0"===F.toString()?"bg-lime-100 flex items-center pl-4 pr-8 py-4 my-2":"bg-red-100 flex items-center px-8 py-4 my-2":"",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mr-4",children:(0,a.jsx)("img",{className:"w-8 h-8 rounded-full",src:s&&"0"===s.toString()?"/nextjs-price-betting2/ethereum.png":s&&"1"===s.toString()?"/nextjs-price-betting2/bitcoin.png":"/nextjs-price-betting2/doge.png"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-gray-400",children:["Asset: ",s?"0"===s.toString()?"ETH":"1"===s.toString()?"BTC":"DOGE":"No asset"]}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-gray-400",children:["Entry Fee: ",k?y.bM(k.toString())+" ETH":"None found"]}),(0,a.jsxs)("p",{className:"flex text-sm text-gray-500 truncate dark:text-gray-400",children:[(0,a.jsx)("span",{className:"mr-5",children:"Predictions Cut Off:"})," ",E?(0,a.jsx)(b.Z,{cutoffTime:E.toString()}):"No cutoff Time"]}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-gray-400",children:["What will the price be on: ",T?(0,g.P)(T.toString()):"No expiration time"]})]}),(0,a.jsxs)("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-400",children:[(0,a.jsxs)("div",{children:["Entrants: ",J?J.toString():"No num players"]}),(0,a.jsxs)("div",{children:["Prize pool: ",f?y.bM(f.toString()):"0"," ETH"]})]})]})})})}function _(e,t,n,a,i,r,s){try{var u=e[r](s),o=u.value}catch(c){return void n(c)}u.done?t(o):Promise.resolve(o).then(a,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){_(r,a,i,s,u,"next",e)}function u(e){_(r,a,i,s,u,"throw",e)}s(void 0)}))}}function N(){var e=(0,l.Nr)(),t=e.Moralis,n=e.isWeb3Enabled,i=e.chainId,r=e.account,s=1337===parseInt(i)?31337:parseInt(i),u=s in d.contractAddresses?d.contractAddresses[s][0]:null,o=(0,m.useState)([]),c=o[0],y=o[1],f=(0,m.useState)(0),x=f[0],g=f[1];(0,m.useEffect)((function(){n&&(N(),M())}),[n,r]);var b=(0,l.JX)({abi:d.factoryAbi,contractAddress:u,functionName:"getNumMarkets",params:{}}),h=b.runContractFunction,_=b.data,N=function(){var e=T(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:e.sent.toString();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=T(p().mark((function e(){var n,a,i,r,s,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("updateUIValues"),n=parseInt(_),a=x+5>n?n-x:5,console.log("marketsToSearch : ",a),console.log("get markets"),i=[],r=x;case 7:if(!(r<a+x)){e.next=16;break}return s={contractAddress:u,functionName:"getMarket",abi:d.factoryAbi,params:{_index:r}},e.next=11,t.executeFunction(s);case 11:o=e.sent.toString(),i.push(o);case 13:r++,e.next=7;break;case 16:g((function(e){return e+a})),y((function(e){return e.concat(i)}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:"p-5",children:[c.map((function(e,t){return(0,a.jsx)(v,{marketAddress:e,index:t},e)})),(0,a.jsx)("button",{onClick:M,className:"bg-transparent hover:bg-orange-500 text-orange-800 font-semibold hover:text-white py-2 px-4 border border-orange-500 hover:border-transparent rounded",children:"Load More"})]})}var M=["31337","5"];function k(){var e=(0,l.Nr)(),t=e.isWeb3Enabled,n=e.chainId;return(0,a.jsxs)("div",{className:s().container,children:[(0,a.jsxs)(i.default,{children:[(0,a.jsx)("title",{children:"Create Next App"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(o,{}),t?(0,a.jsx)("div",{children:M.includes(parseInt(n).toString())?(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(N,{className:"p-8"})}):(0,a.jsx)("div",{children:"Please switch to a supported chainId. The supported Chain Ids are: ".concat(M)})}):(0,a.jsx)("div",{children:"Please connect to a Wallet"})]})}},1438:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var a=function(e){var t=1e3*parseInt(e),n=new Date(t),a=parseInt(n.getMonth())+1,i=n.getDate(),r=n.getFullYear(),s=parseInt(n.getHours()),u=s%12===0?12:s%12,o=s>=12?"p.m.":"a.m.",c=parseInt(n.getMinutes()).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});return"".concat(a,"/").concat(i,"/").concat(r,", ").concat(u,":").concat(c," ").concat(o)}},7160:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},9008:function(e,t,n){e.exports=n(83121)},37917:function(e){"use strict";e.exports=JSON.parse('{"31337":["0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9"]}')},83753:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_ethUsdPriceFeed","type":"address"},{"internalType":"address","name":"_btcUsdPriceFeed","type":"address"},{"internalType":"address","name":"_dogeUsdPriceFeed","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"PredictionMarket__CallFailed","type":"error"},{"inputs":[],"name":"PredictionMarket__IneligibleExpirationTime","type":"error"},{"inputs":[],"name":"PredictionMarket__IneligiblePredictionCutoffTime","type":"error"},{"inputs":[],"name":"PredictionMarket__NotOwner","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"marketCreator","type":"address"},{"indexed":true,"internalType":"uint256","name":"asset","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"entryFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"predictionCutoffTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"expirationTime","type":"uint256"}],"name":"MarketCreated","type":"event"},{"inputs":[{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"_entryFee","type":"uint256"},{"internalType":"uint256","name":"_predictionCutoffTime","type":"uint256"},{"internalType":"uint256","name":"_expirationTime","type":"uint256"}],"name":"createMarket","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getMarket","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNumMarkets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPriceFeeds","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},4463:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"_entryFee","type":"uint256"},{"internalType":"uint256","name":"_predictionCutoffTime","type":"uint256"},{"internalType":"uint256","name":"_expirationTime","type":"uint256"},{"internalType":"address","name":"_priceFeed","type":"address"}],"stateMutability":"payable","type":"constructor"},{"inputs":[],"name":"Market__Ended","type":"error"},{"inputs":[],"name":"Market__ExpirationTimeNotReached","type":"error"},{"inputs":[],"name":"Market__MustExpireInFuture","type":"error"},{"inputs":[],"name":"Market__NotEnoughEth","type":"error"},{"inputs":[],"name":"Market__PayoutFailed","type":"error"},{"inputs":[],"name":"Market__PredictionsClosed","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"predictor","type":"address"},{"indexed":true,"internalType":"uint256","name":"price","type":"uint256"}],"name":"PredictionMade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":true,"internalType":"uint256","name":"_amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_asset","type":"uint256"}],"name":"WinnerChosen","type":"event"},{"inputs":[],"name":"endMarket","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getAsset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCutoffTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeployTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntryFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEthBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getExpirationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getIsOpen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNumPlayers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPredictions","outputs":[{"components":[{"internalType":"address","name":"bettorAddress","type":"address"},{"internalType":"uint256","name":"priceGuess","type":"uint256"}],"internalType":"struct Market.prediction[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPriceFeed","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"makePrediction","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]')}},function(e){e.O(0,[61,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
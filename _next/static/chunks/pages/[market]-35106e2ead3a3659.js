(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{53955:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[market]",function(){return n(30971)}])},30928:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(85893),a=n(67294);function i(e){var t=(0,a.useState)(0),n=t[0],i=t[1],s=(0,a.useState)(0),u=s[0],o=s[1],p=(0,a.useState)(0),c=p[0],l=p[1];(0,a.useEffect)((function(){var t=Date.now(),n=1e3*parseInt(e.cutoffTime),r=n-t<0?[0,0,0]:d(n-t);i(r[0]),o(r[1]),l(r[2])}),[]);var d=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return[Math.floor(e/36e5%24),n,t]};return(0,a.useEffect)((function(){var e=setInterval((function(){c>0&&l(c-1),0===u&&(0===n?clearInterval(e):(i(n-1),o(59),l(59))),0===c&&(0===u?clearInterval(e):(o(u-1),l(59)))}),1e3);return function(){clearInterval(e)}})),(0,r.jsx)("div",{className:"flex",children:0===n&&0===u&&0===c?"Entries Closed":(0,r.jsxs)("span",{children:[" ",n,":",u<10?"0".concat(u):u,":",c<10?"0".concat(c):c]})})}},96301:function(e,t,n){"use strict";var r=n(37917),a=n(83753),i=n(4463);e.exports={contractAddresses:r,factoryAbi:a,instanceAbi:i}},30971:function(e,t,n){"use strict";n.r(t);var r=n(34051),a=n.n(r),i=n(85893),s=n(83078),u=n(41664),o=n.n(u),p=n(96301),c=n(67294),l=n(11163),d=n(35553),y=n(1438),m=n(34295),f=(n(25675),n(30928));function x(e,t,n,r,a,i,s){try{var u=e[i](s),o=u.value}catch(p){return void n(p)}u.done?t(o):Promise.resolve(o).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){x(i,r,a,s,u,"next",e)}function u(e){x(i,r,a,s,u,"throw",e)}s(void 0)}))}}t.default=function(){var e=(0,l.useRouter)(),t=(0,c.useState)(""),n=t[0],r=t[1],u=(0,c.useState)("0"),x=u[0],g=u[1],h=e.query,v=(h.market,h.marketAddress),T=h.asset,k=h.ethBalance,w=h.expirationTime,M=h.cutoffTime,_=(h.deployTime,h.entryFee),N=h.open,E=h.numPlayers,j=_?parseFloat(d.bM(_)):"0",P=k?parseFloat(d.bM(k)):"0";console.log("entryFeeNum : ",j);var F=(0,c.useState)(P),C=F[0],S=F[1],I=(0,c.useState)(E),A=I[0],D=I[1],O=(0,m.lm)(),B=/^[+]?([1-9][0-9]*(?:[\.][0-9]*)?|0*\.0*[1-9][0-9]*)(?:[eE][+-][0-9]+)?$/,H=function(){var e=b(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.test(n)?(t=d.vz(n).toString(),console.log("isNum : "),console.log("formattedNum : ",t),g(t)):window.alert("Estimate is not a valid number");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){x>0&&J()}),[x]);var R=function(){var e=b(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wait(1);case 2:S((function(e){return e+j})),D((function(e){return parseInt(e)+1})),U(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=b(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({type:"info",message:"Transaction Complete!",title:"Tx Notification",position:"topR",icon:"bell"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=b(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z({onSuccess:R,onError:function(e){return console.log(e)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=(0,s.JX)({abi:p.instanceAbi,contractAddress:v,functionName:"makePrediction",params:{_price:x.toString()},msgValue:_}),z=(W.data,W.runContractFunction);return(0,i.jsxs)("div",{children:[(0,i.jsx)(o(),{href:"/nextjs-price-betting2/",children:(0,i.jsx)("a",{className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-red",children:"Back"})}),(0,i.jsxs)("div",{className:N?"max-w-xl p-6 bg-lime-100 border border-gray-200 rounded-lg shadow dark:bg-lime-800 dark:border-lime-700":"max-w-xl p-6 bg-red-100 border border-gray-200 rounded-lg shadow dark:bg-red-800 dark:border-red-700",children:[(0,i.jsx)("div",{className:"flex-shrink-0 mr-4",children:(0,i.jsx)("img",{className:"w-8 h-8 rounded-full",src:"0"===T?"/nextjs-price-betting2/ethereum.png":"1"===T?"/nextjs-price-betting2/bitcoin.png":"/nextjs-price-betting2/doge.png"})}),(0,i.jsxs)("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:["What will ","0"===T?"ETH's":"1"===T?"BTC's":"DOGE's"," price be by ",(0,y.P)(w),"?"]}),(0,i.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Entry Fee: ",j," ETH (entry fees are ALWAYS paid in ETH, regardless of market)"]}),(0,i.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Number of Entrants: ",A]}),(0,i.jsxs)("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Current prize pool: ",C," ETH "]}),(0,i.jsxs)("p",{className:"flex mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Predictions Must be in by: ",(0,y.P)(M)," ",(0,i.jsx)("span",{className:"ml-6",children:(0,i.jsx)(f.Z,{cutoffTime:M})})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your price prediction (US Dollars)"}),(0,i.jsxs)("p",{className:"flex items-center font-normal text-gray-700 dark:text-gray-400 bg-white px-5 rounded-lg",children:["$",(0,i.jsx)("input",{name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-500 dark:placeholder-gray-400 bg-white dark:text-gray ml-2",onChange:function(e){return r(e.target.value)},value:n,placeholder:"2000",required:!0})]})]}),(0,i.jsxs)("button",{onClick:H,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:["Make Prediction",(0,i.jsx)("svg",{"aria-hidden":"true",className:"w-4 h-4 ml-2 -mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),(0,i.jsx)("p",{className:"flex items-center font-normal text-gray-700 dark:text-gray-400",children:"Will be rejected if past the close time"})]})]})}},1438:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var r=function(e){var t=1e3*parseInt(e),n=new Date(t),r=parseInt(n.getMonth())+1,a=n.getDate(),i=n.getFullYear(),s=parseInt(n.getHours()),u=s%12===0?12:s%12,o=s>=12?"p.m.":"a.m.",p=parseInt(n.getMinutes()).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});return"".concat(r,"/").concat(a,"/").concat(i,", ").concat(u,":").concat(p," ").concat(o)}},11163:function(e,t,n){e.exports=n(80880)},37917:function(e){"use strict";e.exports=JSON.parse('{"31337":["0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9"]}')},83753:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_ethUsdPriceFeed","type":"address"},{"internalType":"address","name":"_btcUsdPriceFeed","type":"address"},{"internalType":"address","name":"_dogeUsdPriceFeed","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"PredictionMarket__CallFailed","type":"error"},{"inputs":[],"name":"PredictionMarket__IneligibleExpirationTime","type":"error"},{"inputs":[],"name":"PredictionMarket__IneligiblePredictionCutoffTime","type":"error"},{"inputs":[],"name":"PredictionMarket__NotOwner","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"marketCreator","type":"address"},{"indexed":true,"internalType":"uint256","name":"asset","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"entryFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"predictionCutoffTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"expirationTime","type":"uint256"}],"name":"MarketCreated","type":"event"},{"inputs":[{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"_entryFee","type":"uint256"},{"internalType":"uint256","name":"_predictionCutoffTime","type":"uint256"},{"internalType":"uint256","name":"_expirationTime","type":"uint256"}],"name":"createMarket","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getMarket","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNumMarkets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPriceFeeds","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},4463:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"_entryFee","type":"uint256"},{"internalType":"uint256","name":"_predictionCutoffTime","type":"uint256"},{"internalType":"uint256","name":"_expirationTime","type":"uint256"},{"internalType":"address","name":"_priceFeed","type":"address"}],"stateMutability":"payable","type":"constructor"},{"inputs":[],"name":"Market__Ended","type":"error"},{"inputs":[],"name":"Market__ExpirationTimeNotReached","type":"error"},{"inputs":[],"name":"Market__MustExpireInFuture","type":"error"},{"inputs":[],"name":"Market__NotEnoughEth","type":"error"},{"inputs":[],"name":"Market__PayoutFailed","type":"error"},{"inputs":[],"name":"Market__PredictionsClosed","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"predictor","type":"address"},{"indexed":true,"internalType":"uint256","name":"price","type":"uint256"}],"name":"PredictionMade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":true,"internalType":"uint256","name":"_amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_asset","type":"uint256"}],"name":"WinnerChosen","type":"event"},{"inputs":[],"name":"endMarket","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getAsset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCutoffTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeployTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntryFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEthBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getExpirationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getIsOpen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNumPlayers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPredictions","outputs":[{"components":[{"internalType":"address","name":"bettorAddress","type":"address"},{"internalType":"uint256","name":"priceGuess","type":"uint256"}],"internalType":"struct Market.prediction[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPriceFeed","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"makePrediction","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]')}},function(e){e.O(0,[61,774,888,179],(function(){return t=53955,e(e.s=t);var t}));var t=e.O();_N_E=t}]);